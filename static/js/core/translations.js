// Translation system - condensed version with only essential translations
export const TRANSLATIONS = {
  en: {
    subtitle: "Monitoring device locations with live updates and historical view",
    connecting: "Connecting...",
    connected: "Connected",
    disconnected: "Disconnected",
    connectionError: "Connection Error",
    reconnecting: "Reconnecting in {0}s... ({1}/{2})",
    connectionFailed: "Connection failed - refresh page",
    trackLatest: "Track Latest",
    trackingOff: "Tracking Off",
    historyMode: "History Mode",
    historySettings: "History Settings",
    changeFilter: "Change Filter",
    liveMode: "Live Mode",
    menu: "Menu",
    liveModeBadge: " LIVE MODE",
    historyModeBadge: " HISTORY MODE",
    legendStart: "Start (oldest)",
    legendEnd: "End (newest)",
    filterLabel: "Filter:",
    to: "to",
    noTimeFilterApplied: "No time filter applied",
    configureInHistorySettings: "Configure in History Settings",
    controlsAndInfo: "Controls & Information",
    controls: "锔 Controls",
    locations: " Locations",
    filterByDevice: "Filter by Device:",
    allDevices: "All Devices",
    historyLimit: "History Limit:",
    refreshData: "Refresh Data",
    refreshDataHistorical: "Refresh Data (Historical Mode)",
    showTraceDots: "Show trace dots",
    loadingLocations: "Loading locations...",
    historicalViewConfig: " Historical View Configuration",
    from: "From:",
    to: "To:",
    applyTimeFilter: "Apply Time Filter",
    clearFilter: "Clear Filter",
    noResultsTitle: "No Results Found",
    noResultsMessage: "No location data matches your filter criteria. Try adjusting the parameters.",
    noLocationResultsMessage: "No location data found within {radius} km of the selected coordinates.",
    adjustFilters: "Adjust Filters",
    noLocationsFound: "No locations found",
    deviceId: "Device ID",
    coordinates: "Coordinates",
    time: "Time",
    start: "START",
    end: "END",
    selected: "SELECTED",
    clearSelection: "Clear Selection",
    noTimeFilter: "No time filter applied",
    timeFilterTabLabel: "Time Filter",
    locationFilterTabLabel: "Location Filter",
    latitude: "Latitude",
    longitude: "Longitude",
    radiusKm: "Radius (km)",
    applyLocationFilter: "Apply Location Filter",
    validLocationRequired: "Valid latitude and longitude are required",
    invalidCoordinates: "Invalid coordinates (lat: -90 to 90, lng: -180 to 180)",
    invalidRadius: "Radius must be greater than 0",
    noFilterTitle: "锔 No Time Filter Applied",
    noFilterMessage: "Please configure a time filter in History Settings to view historical data.",
    openHistorySettings: "Open History Settings",
    dismiss: "Dismiss",
    timeFilterActive: "憋 Time Filter:",
    locationFilterActive: " Location Filter:",
    radiusLabel: "Radius:",
    km: "km",
    noFilterSelected: "No filter selected",
    pleaseSelectFilter: "Please select a time range or location to view historical data.",
    selectFilterTab: "Choose a tab above to configure your filter.",
    selectOnMap: "Select on Map",
    selectLocationOnMap: "Click on the map to select a location",
    clickMapToSelect: "Click anywhere on the map to set the location for filtering",
    cancelSelection: "Cancel",
    locationSelected: "Location selected! Coordinates updated.",
    devices: "Devices",
    noDevicesFound: "No devices found",
    locationsCount: "{0} locations",
    filterDevices: "Filter Devices",
    centerOnDevices: "Center on Devices",
    geofenceManagement: "Geofence Management",
    drawNewGeofence: "Draw New Geofence",
    reloadGeofences: "Reload Geofences",
    toggleVisibility: "Toggle Visibility",
    geofenceStats: "Statistics",
    totalGeofences: "Total Geofences",
    activeGeofences: "Active",
    devicesInside: "Devices Inside",
    totalAlerts: "Total Alerts",
    activeGeofencesTitle: "Active Geofences",
    noGeofencesCreated: "No geofences created yet",
    drawingModeActive: "Drawing mode active. Click to add points.",
    drawingCancelled: "Drawing cancelled",
    geofenceCreated: "Geofence created successfully",
    geofenceDeleted: "Geofence deleted",
    geofenceName: "Geofence Name",
    geofenceDescription: "Description",
    geofenceArea: "Area",
    devicesInGeofence: "Devices Inside",
    lastAlert: "Last Alert",
    deleteGeofence: "Delete Geofence",
    confirmDelete: "Are you sure you want to delete this geofence?",
    enterGeofenceName: "Enter geofence name",
    enterDescription: "Enter description (optional)",
    created: "Created",
    updated: "Updated",
    clickToAddPoints: "Click on map to add points",
    doubleClickToFinish: "Double-click or press Enter to finish",
    minimumPoints: "Need at least 3 points",
    pointsAdded: "points added",
    geofenceAreaKm: "km虏",
    deviceEntered: "Device entered geofence",
    deviceExited: "Device exited geofence",
    insideGeofence: "Inside",
    outsideGeofence: "Outside",
    viewOnMap: "View on Map",
    editGeofence: "Edit Geofence",
    activateGeofence: "Activate",
    deactivateGeofence: "Deactivate",
    noDescription: "No description",
    active: "Active",
    inactive: "Inactive",
    geofencesVisible: "Geofences visible",
    geofencesHidden: "Geofences hidden",
    error: "Error",
    geofence: "Geofence",
    activated: "activated",
    deactivated: "deactivated",
    geofences: "Geofences",
    centerGeofences: "Center on Geofences",
    hideGeofences: "Hide Geofences",
    showGeofences: "Show Geofences",
    filterConfiguration: "Filter Configuration",
    selectAtLeastOneFilter: "Please enable at least one filter",
    fixErrorsBeforeApplying: "Please fix validation errors. Filters with errors are now locked.",
    clearAllFilters: "Clear All",
    applyFilter: "Apply Filter",
    fixValidationErrors: "Please fix validation errors to apply filter.",
    noResultsForFilters: "No results found. Try adjusting the location filter.",
    noResultsForTimeFilter: "No results found for this time range.",
    noResultsForLocationFilter: "No results found in this area.",
    geofenceStatus: "Status"
  },
  es: {
    // Spanish translations - include the essential ones from your original file
    subtitle: "Monitoreando ubicaciones de dispositivos con actualizaciones en vivo y vista hist贸rica",
    connecting: "Conectando...",
    connected: "Conectado",
    disconnected: "Desconectado",
    connectionError: "Error de Conexi贸n",
    reconnecting: "Reconectando en {0}s... ({1}/{2})",
    connectionFailed: "Conexi贸n fallida - actualice la p谩gina",
    trackLatest: "Seguir ltimo",
    trackingOff: "Seguimiento Desactivado",
    historyMode: "Modo Hist贸rico",
    historySettings: "Configuraci贸n Hist贸rica",
    changeFilter: "Cambiar Filtro",
    liveMode: "Modo en Vivo",
    menu: "Men煤",
    liveModeBadge: " MODO EN VIVO",
    historyModeBadge: " MODO HISTRICO",
    legendStart: "Inicio (m谩s antiguo)",
    legendEnd: "Fin (m谩s reciente)",
    filterLabel: "Filtro:",
    to: "hasta",
    noTimeFilterApplied: "No se aplic贸 filtro de tiempo",
    configureInHistorySettings: "Configurar en Ajustes de Historial",
    controlsAndInfo: "Controles e Informaci贸n",
    controls: "锔 Controles",
    locations: " Ubicaciones",
    filterByDevice: "Filtrar por Dispositivo:",
    allDevices: "Todos los Dispositivos",
    historyLimit: "L铆mite de Historial:",
    refreshData: "Actualizar Datos",
    refreshDataHistorical: "Actualizar Datos (Modo Hist贸rico)",
    showTraceDots: "Mostrar puntos de ruta",
    loadingLocations: "Cargando ubicaciones...",
    historicalViewConfig: " Configuraci贸n de Vista Hist贸rica",
    from: "Desde:",
    to: "Hasta:",
    applyTimeFilter: "Aplicar Filtro de Tiempo",
    clearFilter: "Limpiar Filtro",
    noResultsTitle: "No se Encontraron Resultados",
    noResultsMessage: "No se encontraron datos de ubicaci贸n que coincidan con sus criterios de filtro. Intente ajustar los par谩metros.",
    noLocationResultsMessage: "No se encontraron datos de ubicaci贸n dentro de {radius} km de las coordenadas seleccionadas.",
    adjustFilters: "Ajustar Filtros",
    noLocationsFound: "No se encontraron ubicaciones",
    deviceId: "ID de Dispositivo",
    coordinates: "Coordenadas",
    time: "Hora",
    start: "INICIO",
    end: "FIN",
    selected: "SELECCIONADO",
    clearSelection: "Limpiar Selecci贸n",
    noTimeFilter: "No se aplic贸 filtro de tiempo",
    timeFilterTabLabel: "Filtro de Tiempo",
    locationFilterTabLabel: "Filtro de Ubicaci贸n",
    latitude: "Latitud",
    longitude: "Longitud",
    radiusKm: "Radio (km)",
    applyLocationFilter: "Aplicar Filtro de Ubicaci贸n",
    validLocationRequired: "Se requiere latitud y longitud v谩lidas",
    invalidCoordinates: "Coordenadas inv谩lidas (lat: -90 a 90, lng: -180 a 180)",
    invalidRadius: "El radio debe ser mayor que 0",
    noFilterTitle: "锔 No se Aplic贸 Filtro de Tiempo",
    noFilterMessage: "Por favor configure un filtro de tiempo en Ajustes de Historial para ver datos hist贸ricos.",
    openHistorySettings: "Abrir Ajustes de Historial",
    dismiss: "Cerrar",
    timeFilterActive: "憋 Filtro de Tiempo:",
    locationFilterActive: " Filtro de Ubicaci贸n:",
    radiusLabel: "Radio:",
    km: "km",
    noFilterSelected: "Ning煤n filtro seleccionado",
    pleaseSelectFilter: "Por favor seleccione un rango de tiempo o ubicaci贸n para ver datos hist贸ricos.",
    selectFilterTab: "Elija una pesta帽a arriba para configurar su filtro.",
    selectOnMap: "Seleccionar en Mapa",
    selectLocationOnMap: "Haga clic en el mapa para seleccionar una ubicaci贸n",
    clickMapToSelect: "Haga clic en cualquier lugar del mapa para establecer la ubicaci贸n del filtro",
    cancelSelection: "Cancelar",
    locationSelected: "隆Ubicaci贸n seleccionada! Coordenadas actualizadas.",
    devices: "Dispositivos",
    noDevicesFound: "No se encontraron dispositivos",
    locationsCount: "{0} ubicaciones",
    filterDevices: "Filtrar Dispositivos",
    centerOnDevices: "Centrar en Dispositivos",
    geofenceManagement: "Gesti贸n de Geocercas",
    drawNewGeofence: "Dibujar Nueva Geocerca",
    reloadGeofences: "Recargar Geocercas",
    toggleVisibility: "Alternar Visibilidad",
    geofenceStats: "Estad铆sticas",
    totalGeofences: "Total de Geocercas",
    activeGeofences: "Activas",
    devicesInside: "Dispositivos Dentro",
    totalAlerts: "Total de Alertas",
    activeGeofencesTitle: "Geocercas Activas",
    noGeofencesCreated: "No se han creado geocercas a煤n",
    drawingModeActive: "Modo de dibujo activo. Haz clic para agregar puntos.",
    drawingCancelled: "Dibujo cancelado",
    geofenceCreated: "Geocerca creada exitosamente",
    geofenceDeleted: "Geocerca eliminada",
    geofenceName: "Nombre de Geocerca",
    geofenceDescription: "Descripci贸n",
    geofenceArea: "rea",
    devicesInGeofence: "Dispositivos Dentro",
    lastAlert: "ltima Alerta",
    deleteGeofence: "Eliminar Geocerca",
    confirmDelete: "驴Est谩 seguro de que desea eliminar esta geocerca?",
    enterGeofenceName: "Ingrese nombre de geocerca",
    enterDescription: "Ingrese descripci贸n (opcional)",
    created: "Creado",
    updated: "Actualizado",
    clickToAddPoints: "Haz clic en el mapa para agregar puntos",
    doubleClickToFinish: "Doble clic o presiona Enter para finalizar",
    minimumPoints: "Se necesitan al menos 3 puntos",
    pointsAdded: "puntos agregados",
    geofenceAreaKm: "km虏",
    deviceEntered: "Dispositivo entr贸 a geocerca",
    deviceExited: "Dispositivo sali贸 de geocerca",
    insideGeofence: "Dentro",
    outsideGeofence: "Fuera",
    viewOnMap: "Ver en Mapa",
    editGeofence: "Editar Geocerca",
    activateGeofence: "Activar",
    deactivateGeofence: "Desactivar",
    noDescription: "Sin descripci贸n",
    active: "Activa",
    inactive: "Inactiva",
    geofencesVisible: "Geocercas visibles",
    geofencesHidden: "Geocercas ocultas",
    error: "Error",
    geofence: "Geocerca",
    activated: "activada",
    deactivated: "desactivada",
    geofences: "Geocercas",
    centerGeofences: "Centrar en Geocercas",
    hideGeofences: "Ocultar Geocercas",
    showGeofences: "Mostrar Geocercas", 
    filterConfiguration: "Configuraci贸n de Filtro",
    selectAtLeastOneFilter: "Por favor habilite al menos un filtro",
    fixErrorsBeforeApplying: "Por favor corrija los errores de validaci贸n. Los filtros con errores est谩n ahora bloqueados.",
    clearAllFilters: "Limpiar Todo",
    applyFilter: "Aplicar Filtro", 
    fixValidationErrors: "Por favor corrija los errores de validaci贸n para aplicar el filtro.",
    noResultsForFilters: "No se encontraron resultados. Intente ajustar el filtro de ubicaci贸n.",
    noResultsForTimeFilter: "No se encontraron resultados para este rango de tiempo.",
    noResultsForLocationFilter: "No se encontraron resultados en esta 谩rea.",
    geofenceStatus: "Estado"
  }
};

export class TranslationManager {
  constructor() {
    this.currentLanguage = this.detectLanguage();
  }

  detectLanguage() {
    const browserLang = navigator.language || navigator.userLanguage;
    return browserLang.startsWith('es') ? 'es' : 'en';
  }

  t(key) {
    const keys = key.split('.');
    let value = TRANSLATIONS[this.currentLanguage];
    for (const k of keys) {
      value = value?.[k];
      if (value === undefined) {
        console.warn(`Translation key not found: ${key}`);
        return key;
      }
    }
    return value;
  }

  setLanguage(lang) {
    if (TRANSLATIONS[lang]) {
      this.currentLanguage = lang;
      return true;
    }
    return false;
  }

  format(message, ...args) {
    return message.replace(/{(\d+)}/g, (match, number) => {
      return typeof args[number] !== 'undefined' ? args[number] : match;
    });
  }
}
